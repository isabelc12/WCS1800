#include <Arduino.h>
#include "WCS1800.h"

WCS1800::WCS1800(uint8_t pin, uint8_t V_A, uint8_t Vzero) //Vzer0=2.5
{
  analogPin=pin;
  sensitivity=V_A; //sensitivity in [Volts/Amps]
  zero=Vzero;
}

float WCS1800::getVout()
{
  int scale = 512;
  float vout = 0;
  vout=analogRead(analogPin);

  float V = vout*zero/scale;
  //float V = (float)vout/scale;
  //Serial.println(V);
  //V = (float)vout/scale;
  return V;
  //Serial.println(V);
}

float WCS1800::getDC(float Vo)
{
  float I=(Vo-zero);
  Serial.println(I);
  //I=I/sensitivity;
  I=I/0.06;
  Serial.println(I);
  return I;
}

float WCS1800::getAC(float Vo)
{
  float Iac=(Vo-zero)/sensitivity*0.707;
  return Iac;
}

